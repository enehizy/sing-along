{"ast":null,"code":"import axios from 'axios';\nimport cheerio from 'cheerio';\nexport async function querySong(q) {\n  const response = await axios(`https://api.genius.com/search?q=${q}`, {\n    headers: {\n      'Authorization': `Bearer ${process.env.ACCESS_TOKEN}`\n    }\n  });\n  return response.data.response.hits;\n}\nexport async function getLyrics(path) {\n  const result = await axios(`https://genius.com/${path}`);\n  let $ = cheerio.load(`${result.data}`);\n  const lyricInDom = $('.lyrics  > p').html();\n  $ = cheerio.load(`${lyricInDom}`, {\n    xml: {\n      normalizeWhitespace: true\n    }\n  });\n  console.log({\n    root: $.root()[0].Document\n  });\n  const lyrics = $.root().text();\n  if (lyrics === 'null') throw `lyric not found`;\n  return `${lyrics}`;\n}\nexport async function findSong(id) {\n  const response = await axios(`https://api.genius.com/songs/${id}`, {\n    headers: {\n      'Authorization': `Bearer ${process.env.ACCESS_TOKEN}`\n    }\n  });\n  return response.data.response.song;\n}","map":{"version":3,"sources":["C:/Users/User/Desktop/projects/sing-along/helpers.js"],"names":["axios","cheerio","querySong","q","response","headers","process","env","ACCESS_TOKEN","data","hits","getLyrics","path","result","$","load","lyricInDom","html","xml","normalizeWhitespace","console","log","root","Document","lyrics","text","findSong","id","song"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAO,eAAeC,SAAf,CAAyBC,CAAzB,EAA2B;AAE9B,QAAMC,QAAQ,GAAE,MAAMJ,KAAK,CAAE,mCAAkCG,CAAE,EAAtC,EAAwC;AAC/DE,IAAAA,OAAO,EAAC;AACJ,uBAAiB,UAASC,OAAO,CAACC,GAAR,CAAYC,YAAa;AAD/C;AADuD,GAAxC,CAA3B;AAKA,SAAOJ,QAAQ,CAACK,IAAT,CAAcL,QAAd,CAAuBM,IAA9B;AAEH;AAED,OAAO,eAAeC,SAAf,CAAyBC,IAAzB,EAA8B;AAE7B,QAAMC,MAAM,GAAC,MAAMb,KAAK,CAAE,sBAAqBY,IAAK,EAA5B,CAAxB;AACA,MAAIE,CAAC,GAAGb,OAAO,CAACc,IAAR,CAAc,GAAEF,MAAM,CAACJ,IAAK,EAA5B,CAAR;AACA,QAAMO,UAAU,GAACF,CAAC,CAAC,cAAD,CAAD,CAAkBG,IAAlB,EAAjB;AACAH,EAAAA,CAAC,GAACb,OAAO,CAACc,IAAR,CAAc,GAAEC,UAAW,EAA3B,EAA8B;AAC5BE,IAAAA,GAAG,EAAE;AACHC,MAAAA,mBAAmB,EAAE;AADlB;AADuB,GAA9B,CAAF;AAKEC,EAAAA,OAAO,CAACC,GAAR,CAAY;AAACC,IAAAA,IAAI,EAACR,CAAC,CAACQ,IAAF,GAAS,CAAT,EAAYC;AAAlB,GAAZ;AACA,QAAMC,MAAM,GAACV,CAAC,CAACQ,IAAF,GAASG,IAAT,EAAb;AAEA,MAAGD,MAAM,KAAK,MAAd,EAAsB,MAAO,iBAAP;AACtB,SAAQ,GAAEA,MAAO,EAAjB;AAET;AAID,OAAO,eAAeE,QAAf,CAAwBC,EAAxB,EAA2B;AAE9B,QAAMvB,QAAQ,GAAE,MAAMJ,KAAK,CAAE,gCAA+B2B,EAAG,EAApC,EAAsC;AAC7DtB,IAAAA,OAAO,EAAC;AACJ,uBAAiB,UAASC,OAAO,CAACC,GAAR,CAAYC,YAAa;AAD/C;AADqD,GAAtC,CAA3B;AAKA,SAAOJ,QAAQ,CAACK,IAAT,CAAcL,QAAd,CAAuBwB,IAA9B;AAGH","sourcesContent":["import axios from 'axios';\r\nimport cheerio from 'cheerio';\r\nexport async function querySong(q){\r\n\r\n    const response= await axios(`https://api.genius.com/search?q=${q}`,{\r\n        headers:{\r\n            'Authorization':`Bearer ${process.env.ACCESS_TOKEN}`\r\n        }\r\n    }); \r\n    return response.data.response.hits;\r\n\r\n}\r\n\r\nexport async function getLyrics(path){\r\n  \r\n        const result=await axios(`https://genius.com/${path}`);\r\n        let $ = cheerio.load(`${result.data}`);\r\n        const lyricInDom=$('.lyrics  > p').html();\r\n        $=cheerio.load(`${lyricInDom}`, {\r\n            xml: {\r\n              normalizeWhitespace: true,\r\n            }})\r\n        \r\n          console.log({root:$.root()[0].Document})\r\n          const lyrics=$.root().text();\r\n    \r\n          if(lyrics === 'null') throw `lyric not found`;\r\n          return `${lyrics}`;\r\n      \r\n}\r\n     \r\n      \r\n\r\nexport async function findSong(id){\r\n\r\n    const response= await axios(`https://api.genius.com/songs/${id}`,{\r\n        headers:{\r\n            'Authorization':`Bearer ${process.env.ACCESS_TOKEN}`\r\n        }\r\n    });\r\n    return response.data.response.song;\r\n   \r\n  \r\n}"]},"metadata":{},"sourceType":"module"}